<button (click)="showAddTaskForm()" class="add-task-btn">Lisää tehtävä</button>

<div class="task-container">
  <ul class="task-list">
    <li *ngFor="let task of tasks | async" class="task-item">
      <div class="task-content">
        <!-- Lisätty tarkistus _id:n olemassaololle ennen sen käyttöä -->
        <input type="checkbox" (change)="task._id ? toggleTaskSelection(task._id) : null" [checked]="task._id ? selectedTasks.has(task._id) : false">
        <span class="task-title" [class.completed]="task.completed">{{ task.title }}</span>
      </div>
      <div class="task-actions">
        <!-- Lisätty tarkistus _id:n olemassaololle ennen sen käyttöä -->
        <button (click)="task._id ? deleteTask(task._id) : null" class="delete-btn">Poista</button>
        <button (click)="setActiveTask(task)" class="edit-btn">Muokkaa</button>
      </div>
    </li>
  </ul>
  <button (click)="deleteSelectedTasks()" class="delete-selected-btn">Poista valitut</button>
</div>

<!-- Muokkauslomakkeen dialogi -->
<div *ngIf="isEditFormVisible && activeTask" class="edit-form-dialog">
  <h3>{{ activeTask._id ? 'Muokkaa Tehtävää' : 'Lisää Uusi Tehtävä' }}</h3>
  <form (ngSubmit)="activeTask._id ? updateTask() : addNewTask()">
    <label for="title">Otsikko:</label>
    <input type="text" id="title" [(ngModel)]="activeTask.title" name="title" required>

    <label for="description">Kuvaus:</label>
    <textarea id="description" [(ngModel)]="activeTask.description" name="description" required></textarea>

    <button type="submit" class="save-btn">{{ activeTask._id ? 'Tallenna' : 'Lisää' }}</button>
    <button type="button" (click)="cancelEdit()" class="cancel-btn">Peruuta</button>
  </form>
</div>
